






-- tsql
-- \getenv abs_srcdir PG_ABS_SRCDIR
-- GO
-- \getenv libdir PG_LIBDIR
-- GO
-- \getenv dlsuffix PG_DLSUFFIX
-- GO
-- \set regresslib :libdir '/regress' :dlsuffix
-- GO
CREATE TABLE CHAR_TBL(f1 char(4));
GO

INSERT INTO CHAR_TBL (f1) VALUES
  ('a'),
  ('ab'),
  ('abcd'),
  ('abcd    ');
GO
~~ROW COUNT: 4~~


-- psql     
VACUUM master_dbo.CHAR_TBL;
GO

-- tsql
CREATE TABLE FLOAT8_TBL(f1 float);
GO

INSERT INTO FLOAT8_TBL(f1) VALUES
  ('0.0'),
  ('-34.84'),
  ('-1004.30'),
  ('-1.2345678901234e+200'),
  ('-1.2345678901234e-200');
GO
~~ROW COUNT: 5~~


-- psql     
VACUUM master_dbo.FLOAT8_TBL;
GO

-- tsql
CREATE TABLE INT2_TBL(f1 int2);
GO

INSERT INTO INT2_TBL(f1) VALUES
  ('0   '),
  ('  1234 '),
  ('    -1234'),
  ('32767'),  -- largest and smallest values
  ('-32767');
GO
~~ROW COUNT: 5~~


-- psql     

VACUUM master_dbo.INT2_TBL;
GO

-- tsql
CREATE TABLE INT4_TBL(f1 int);
GO

INSERT INTO INT4_TBL(f1) VALUES
  ('   0  '),
  ('123456     '),
  ('    -123456'),
  ('2147483647'),  -- largest and smallest values
  ('-2147483647');
GO
~~ROW COUNT: 5~~


-- psql     

VACUUM master_dbo.INT4_TBL;
GO

-- tsql
CREATE TABLE INT8_TBL(q1 bigint, q2 bigint);
GO

INSERT INTO INT8_TBL VALUES
  ('  123   ','  456'),
  ('123   ','4567890123456789'),
  ('4567890123456789','123'),
  ('+4567890123456789','4567890123456789'),
  ('+4567890123456789','-4567890123456789');
GO
~~ROW COUNT: 5~~


-- psql     
VACUUM master_dbo.INT8_TBL;
GO

-- tsql
CREATE TABLE POINT_TBL(f1 point);
GO

INSERT INTO POINT_TBL(f1) VALUES
  ('(0.0,0.0)'),
  ('(-10.0,0.0)'),
  ('(-3.0,4.0)'),
  ('(5.1, 34.5)'),
  ('(-5.0,-12.0)'),
  ('(1e-300,-1e-300)'),  -- To underflow
  ('(1e+300,Inf)'),  -- To overflow
  ('(Inf,1e+300)'),  -- Transposed
  (' ( Nan , NaN ) '),
  ('10.0,10.0');
GO
~~ROW COUNT: 10~~


-- We intentionally don't vacuum point_tbl here; geometry depends on that
CREATE TABLE TEXT_TBL (f1 varchar(max));
GO

INSERT INTO TEXT_TBL VALUES
  ('doh!'),
  ('hi de ho neighbor');
GO
~~ROW COUNT: 2~~


-- psql     
VACUUM master_dbo.TEXT_TBL;
GO

-- tsql
CREATE TABLE VARCHAR_TBL(f1 varchar(4));
GO


INSERT INTO VARCHAR_TBL (f1) VALUES
  ('a'),
  ('ab'),
  ('abcd'),
  ('abcd    ');
GO
~~ROW COUNT: 4~~


-- psql     
VACUUM master_dbo.VARCHAR_TBL;
GO

-- tsql
CREATE TABLE onek (
	unique1		int,
	unique2		int,
	two			int,
	four		int,
	ten			int,
	twenty		int,
	hundred		int,
	thousand	int,
	twothousand	int,
	fivethous	int,
	tenthous	int,
	odd			int,
	even		int,
	stringu1	name,
	stringu2	name,
	string4		name
);
GO

-- psql     
-- \set filename :abs_srcdir '/data/onek.data'
COPY master_dbo.onek From '/home/szh/workspace/babel14/src/RDSManfred/src/test/regress/data/onek.data';
GO
~~ROW COUNT: 1000~~


VACUUM ANALYZE master_dbo.onek;
GO

-- tsql
CREATE TABLE onek2 (
	unique1		int,
	unique2		int,
	two			int,
	four		int,
	ten			int,
	twenty		int,
	hundred		int,
	thousand	int,
	twothousand	int,
	fivethous	int,
	tenthous	int,
	odd			int,
	even		int,
	stringu1	name,
	stringu2	name,
	string4		name
);
GO

insert into onek2 select * from onek;
GO
~~ROW COUNT: 1000~~


-- psql     

VACUUM ANALYZE master_dbo.onek2;
GO

-- tsql

CREATE TABLE tenk1 (
	unique1		int,
	unique2		int,
	two			int,
	four		int,
	ten			int,
	twenty		int,
	hundred		int,
	thousand	int,
	twothousand	int,
	fivethous	int,
	tenthous	int,
	odd			int,
	even		int,
	stringu1	name,
	stringu2	name,
	string4		name
);
GO

-- psql     
-- \set filename :abs_srcdir '/data/tenk.data'
COPY master_dbo.tenk1 FROM '/home/szh/workspace/babel14/src/RDSManfred/src/test/regress/data/tenk.data';
GO
~~ROW COUNT: 10000~~

VACUUM ANALYZE master_dbo.tenk1;
GO

-- tsql
CREATE TABLE tenk2 (
	unique1		int,
	unique2		int,
	two			int,
	four		int,
	ten			int,
	twenty		int,
	hundred		int,
	thousand	int,
	twothousand	int,
	fivethous	int,
	tenthous	int,
	odd			int,
	even		int,
	stringu1	name,
	stringu2	name,
	string4		name
);
GO

insert into tenk2 select * from tenk1;
GO
~~ROW COUNT: 10000~~


-- psql     
VACUUM ANALYZE master_dbo.tenk2;
GO

-- tsql
CREATE TABLE person (
	name 		varchar(max),
	age			int,
	location 	point
);
GO

-- psql     
-- \set filename :abs_srcdir '/data/person.data'
COPY master_dbo.person FROM '/home/szh/workspace/babel14/src/RDSManfred/src/test/regress/data/person.data';
GO
~~ROW COUNT: 50~~


VACUUM ANALYZE master_dbo.person;
GO

-- tsql
CREATE TABLE emp (
    name 		varchar(max),
	age			int,
	location 	point,
	salary 		int,
	manager 	name
) 
GO

-- psql
-- \set filename :abs_srcdir '/data/emp.data'
COPY master_dbo.emp FROM '/home/szh/workspace/babel14/src/RDSManfred/src/test/regress/data/emp.data';
GO
~~ROW COUNT: 3~~


VACUUM ANALYZE master_dbo.emp;
GO

-- tsql
CREATE TABLE student (
    name 		varchar(max),
	age			int,
	location 	point,
	gpa 		float
);
GO

-- psql
-- \set filename :abs_srcdir '/data/student.data'
COPY master_dbo.student FROM '/home/szh/workspace/babel14/src/RDSManfred/src/test/regress/data/student.data';
GO
~~ROW COUNT: 2~~


VACUUM ANALYZE master_dbo.student;
GO

-- tsql

CREATE TABLE stud_emp (
    name 		varchar(max),
	age			int,
	location 	point,
	salary 		int,
	manager 	name,
	gpa 		float,
	percent 	int
) ;
GO
~~ERROR (Code: 33557097)~~

~~ERROR (Message: syntax error near 'percent' at line 8 and character position 1)~~


-- psql 
-- \set filename :abs_srcdir '/data/stud_emp.data'
COPY master_dbo.stud_emp FROM '/home/szh/workspace/babel14/src/RDSManfred/src/test/regress/data/stud_emp.data';
GO
~~ERROR (Code: 0)~~

~~ERROR (Message: ERROR: relation "master_dbo.stud_emp" does not exist
    Server SQLState: 42P01)~~


VACUUM ANALYZE master_dbo.stud_emp;
GO
~~ERROR (Code: 0)~~

~~ERROR (Message: ERROR: relation "master_dbo.stud_emp" does not exist
    Server SQLState: 42P01)~~


-- tsql
CREATE TABLE aggtest (
	a 			int,
	b			float
);
GO

-- psql
-- \set filename :abs_srcdir '/data/agg.data'
COPY master_dbo.aggtest FROM '/home/szh/workspace/babel14/src/RDSManfred/src/test/regress/data/agg.data';
GO
~~ROW COUNT: 4~~


VACUUM ANALYZE master_dbo.aggtest;
GO

-- tsql
CREATE TABLE road (
	name		varchar(max),
	thepath 	path
);
GO

-- psql

-- \set filename :abs_srcdir '/data/streets.data'
COPY master_dbo.road FROM '/home/szh/workspace/babel14/src/RDSManfred/src/test/regress/data/streets.data';
GO
~~ROW COUNT: 5124~~


VACUUM ANALYZE master_dbo.road;
GO



















